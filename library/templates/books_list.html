{% extends 'layout.html' %}

{% block content %}
    <h1>{{ list_title }}</h1>
    <main class="all_book_main">
        <table width="100%" cellpadding="10">
            {% for book in books %}
                <tbody>
                <tr class="book_list">
                    <td width="50" valign="top">
                        <a class="nbg" href="{{ book.link }}" title="book.title">
                            <img src="{{ book.image_url }}" width="75" class="">
                        </a>
                    </td>

                    <td valign="top">
                        <p class="ul"></p>
                        <div class="pl2">
                            <a href="{{ url_for('book_bp.book_desc', book_id=book.book_id) }}" class="">
                                <h3>{{ book.title }} </h3>
                            </a>
                            <p>Release year: {{ book.release_year }}</p>
                            <p>Publisher: {{ book.publisher.name }}</p>
                            <p> Authors:
                                {% for author in book.authors %}
                                    {{ author.full_name }},
                                {% endfor %}
                            </p>
                        </div>
                        </div>
                    </td>

                    {% if list_title == "All Books" %}

                        <td>
                            <div class="add_buttom">
                                <a href="{{ url_for('book_bp.read_a_book', read_book_id=book.book_id) }}"> Read the
                                    Book </a>
                                <a href="#"> Add to Favourite </a>
                            </div>
                        </td>

                    {% endif %}


                </tr>
                </tbody>
            {% endfor %}
        </table>

        <div class="change_pages">
            <div class="tm-prev-next-wrapper">
                {% if prev is none %}
                    <a href="#" class="prev-next-disable">Prev</a>
                {% else %}
                    <a href="{{ prev }}" class="prev-next">Prev</a>
                {% endif %}
                {% if next is none %}
                    <a href="#" class="prev-next-disable">Next</a>
                {% else %}
                    <a href="{{ next }}" class="prev-next">Next</a>
                {% endif %}
            </div>
            <div class="tm-paging-wrapper">
                <span class="d-inline-block mr-3">Page</span>
                <nav class="tm-paging-nav d-inline-block">
                    <ul>
                        {% for index in pages %}
                            {% if list_title == "Read Books" %}
                                {% if target_page == index %}
                                    <li class="tm-paging-item active">
                                        <a href="{{ url_for('book_bp.read_book', page=index) }}"
                                           class="page_index_a tm-paging-link">{{ index }}</a>
                                    </li>
                                {% else %}
                                    <li class="tm-paging-item">
                                        <a href="{{ url_for('book_bp.read_book', page=index) }}"
                                           class="page_index_a tm-paging-link">{{ index }}</a>
                                    </li>
                                {% endif %}

                            {% endif %}

                            {% if list_title == "All Books" %}
                                {% if target_page == index %}
                                    <li class="tm-paging-item active">
                                        <a href="{{ url_for('book_bp.books_list', page=index) }}"
                                           class="page_index_a tm-paging-link">{{ index }}</a>
                                    </li>
                                {% else %}
                                    <li class="tm-paging-item">
                                        <a href="{{ url_for('book_bp.books_list', page=index) }}"
                                           class="page_index_a tm-paging-link">{{ index }}</a>
                                    </li>
                                {% endif %}

                            {% endif %}

                            {% if list_title == "Favourite Books" %}
                                {% if target_page == index %}
                                    <li class="tm-paging-item active">
                                        <a href="{{ url_for('book_bp.favourite_book', page=index) }}"
                                           class="page_index_a tm-paging-link">{{ index }}</a>
                                    </li>
                                {% else %}
                                    <li class="tm-paging-item">
                                        <a href="{{ url_for('book_bp.favourite_book', page=index) }}"
                                           class="page_index_a tm-paging-link">{{ index }}</a>
                                    </li>
                                {% endif %}

                            {% endif %}

                        {% endfor %}
                    </ul>
                </nav>
            </div>
        </div>
    </main>
{% endblock %}
